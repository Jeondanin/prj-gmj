<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.gmj.prj.GmjBboard">
		<select id="selectBboardList" resultType="com.gmj.prj.vo.GmjBboard">
			select * from gmjbboard
		</select>
		<select id="selectCboardListUser" resultType="com.gmj.prj.vo.GmjCboard">
			select gmjbboardno, gmjbboardtitle,gmjusername,date_format(gmjbboard.credat,"%Y-%m-%d") as credat,gmjbboardcnt from gmjbboard,gmjclient
			 where gmjbboard.gmjclientno=gmjclient.gmjUserNo order by gmjbboard.credat desc, gmjbboardno desc limit #{bundle} OFFSET #{OFFSET}
		</select>
		<select id="selectBboard" resultType="com.gmj.prj.vo.GmjBboard">
			select * from gmjbboard
			where gmjbboardno =#{gmjbboardno}
		</select>
		<update id="updateBboard">
			update gmjbboard
			<set>
				<if test="gmjbboardtitle!=null">gmjbboardtitle=#{gmjbboardtitle},</if>
				<if test="gmjbboarddesc!=null">gmjbboarddesc=#{gmjbboarddesc}</if>
			</set>
			where gmjbboardno=#{gmjbboardno}
		</update>
		<delete id="deleteBboard">
			delete from gmjbboard
			where gmjbboardno =#{gmjbboardno} 
		</delete>
		<select id="getOrder" resultType="int">
			call p_find_order_b(#{gmjbboardno},@_row);
		</select>
		
	</mapper>